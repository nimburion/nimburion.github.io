<div class="toc-title">On this page</div>
<nav class="toc-nav" id="toc-nav">
  <!-- Generated by JavaScript -->
</nav>

<script>
  // Auto-generate TOC from h2 and h3 headings
  (function() {
    const content = document.querySelector('.docs-content');
    const tocNav = document.getElementById('toc-nav');
    
    if (!content || !tocNav) return;
    
    const headings = content.querySelectorAll('h2, h3');
    if (headings.length === 0) return;
    
    const ul = document.createElement('ul');
    
    headings.forEach(heading => {
      // Generate ID if missing
      if (!heading.id) {
        heading.id = heading.textContent
          .toLowerCase()
          .replace(/[^a-z0-9]+/g, '-')
          .replace(/^-|-$/g, '');
      }
      
      const li = document.createElement('li');
      const a = document.createElement('a');
      a.href = '#' + heading.id;
      a.textContent = heading.textContent;
      
      // Indent h3
      if (heading.tagName === 'H3') {
        const subUl = li.parentElement?.querySelector('ul:last-child') || document.createElement('ul');
        if (!subUl.parentElement) {
          const lastLi = ul.querySelector('li:last-child');
          if (lastLi) lastLi.appendChild(subUl);
        }
        subUl.appendChild(li);
      } else {
        ul.appendChild(li);
      }
      
      li.appendChild(a);
    });
    
    tocNav.appendChild(ul);
    
    // Highlight active section on scroll
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const id = entry.target.id;
        const link = tocNav.querySelector(`a[href="#${id}"]`);
        if (entry.isIntersecting) {
          tocNav.querySelectorAll('a').forEach(a => a.classList.remove('active'));
          link?.classList.add('active');
        }
      });
    }, { rootMargin: '-80px 0px -80% 0px' });
    
    headings.forEach(heading => observer.observe(heading));
  })();
</script>
