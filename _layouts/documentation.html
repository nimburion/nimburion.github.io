<!doctype html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% seo %}
  <link rel="icon" type="image/svg+xml" href="{{ '/assets/images/brand/icon.svg' | relative_url }}">
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    const bootstrapMermaid = () => {
      const blocks = document.querySelectorAll('pre > code.language-mermaid, pre > code.lang-mermaid');
      blocks.forEach((codeBlock) => {
        const pre = codeBlock.parentElement;
        if (!pre || pre.dataset.mermaidProcessed === 'true') return;

        const wrapper = document.createElement('div');
        wrapper.className = 'mermaid';
        wrapper.textContent = codeBlock.textContent || '';
        pre.replaceWith(wrapper);
      });

      mermaid.initialize({ startOnLoad: true });
      mermaid.run({ querySelector: '.mermaid' });
    };

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', bootstrapMermaid, { once: true });
    } else {
      bootstrapMermaid();
    }
  </script>
</head>
<body class="documentation-layout">
<a class="skip-link" href="#main-content">Vai al contenuto</a>

{% include site-header.html %}

<main id="main-content" class="site-main">
  {% assign is_documentation_home = false %}
  {% if page.url == '/documentation/' or page.url == '/documentation/index.html' %}
    {% assign is_documentation_home = true %}
  {% endif %}
  <div class="container documentation-shell {% if is_documentation_home %}is-documentation-home{% endif %}">
    <article class="documentation-content {% if is_documentation_home %}documentation-home-content{% endif %}">
      {% unless is_documentation_home %}
      {% assign url_parts = page.url | split: "/" %}
      {% assign section_key = url_parts[2] %}
      {% assign section_slug = section_key | default: "" %}
      {% assign page_slug = url_parts[3] %}

      {% case section_key %}
      {% when "nimburion" %}{% assign section_label = "Nimburion" %}
      {% when "apigateway" %}{% assign section_label = "API Gateway" %}
      {% when "bootstrapper" %}{% assign section_label = "Bootstrapper" %}
      {% else %}{% assign section_label = section_key | replace: "-", " " | capitalize %}
      {% endcase %}

      <nav class="documentation-breadcrumb" aria-label="Breadcrumb">
        <a href="{{ '/documentation/' | relative_url }}">Documentation</a>
        {% if section_slug != "" %}
        <span>/</span>
        <a href="{{ '/documentation/' | append: section_slug | append: '/' | relative_url }}">{{ section_label }}</a>
        {% endif %}
        {% if page_slug and page_slug != "" %}
        <span>/</span>
        <span>{{ page.title | default: page_slug | replace: "-", " " | capitalize }}</span>
        {% endif %}
      </nav>
      {% endunless %}

      {{ content }}
    </article>
  </div>
</main>

{% include site-footer.html %}
</body>
</html>
